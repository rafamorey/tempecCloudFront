<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./style/style.css">
  <!-- <link rel="stylesheet" href="dashboard.css"> -->
  <!-- <link rel="stylesheet" href="./style/config.css"> -->
  <title>Document</title>
</head>
<body>
  <header >
    <div class="headerLogo">
      <img src="./icons/icono.jpg" alt="">
    </div>
    <div class="title">  
      <h1>Diinpec</h1>
    </div>
  </header>
    <section class="menu">
      <ul>
        <li><a class="linkMenuOption" href="./device.html">Home</a></li>
        <li><a class="linkMenuOption" href="./dashboard.html">Dashboard</a></li>
        <li><a class="linkMenuOption" id="historyBtn" href="./history.html">History</a></li>
        <li><a class="linkMenuOption" href="./config.html">Configuration</a></li>
        <li><a id="signOut" class="linkMenuOption" href="./index.html">Sign out</a></li>
      </ul>
    </section >
    <div class="configContainer">
      <span>Setpoint</span>
        <input type="text" value="" class="inputConfig" id="setPoint">
        <span>Max Limit</span>
        <input type="text" value="" class="inputConfig" id="maxLimit">
        <span>Min Limit</span>
        <input type="text" value="" class="inputConfig" id="minLimit" >
        <span>Name Device</span>
        <input type="text" value="" class="inputConfig" id="name">
        <span>Hist Max</span>
        <input type="text" value="" class="inputConfig" id="histMax">
        <span>Hist Min</span>
        <input type="text" value="" class="inputConfig" id="histMin">
      </div>
      <input type="Button" value="Send" class="sendConfig" id="send">
  <footer>
    <div class="cr">
      Copyright 1995-2022 DIINPEC. Todods los derechos reservados
    </div>
    <div class="legal">
      <ul class="legalTerms">
        <li>Mexico</li>
        <li>Accesibilidad</li>
        <li>Terminos y condiciones</li>
        <li>Privacidad</li>
        <li>Legales</li>
      </ul>
      <
    
  </footer>
  <script>
    const data = localStorage.getItem('deviceData');
    const dataParser = JSON.parse(data)
    console.log(dataParser)
    const setPoint = document.getElementById('setPoint')
    const maxLimit = document.getElementById('maxLimit')
    const minLimit = document.getElementById('minLimit')
    const name = document.getElementById('name')
    const histMax = document.getElementById('histMax')
    const histMin = document.getElementById('histMin')
<<<<<<< HEAD
    const sendButton = document.getElementById('send')
=======
    const btnSignOut = document.getElementById('signOut')

btnSignOut.addEventListener('click', ()=>{
  localStorage.removeItem('deviceData')
  localStorage.removeItem('deviceStatus')
  localStorage.removeItem('deviceValues')
  localStorage.removeItem('1')
  window.location.href = 'http://127.0.0.1:5501/public/index.html'
})
>>>>>>> 9e6f59a736ca25c9ab27de66b85791d8cd6196bd

    send.addEventListener('click', () => {
      
    })

    async function sendConfig(){

      const res = await fetch(`${api_urlEnterprise}deviceid`,{
        method:'UPDATE',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          "enterprise": dataParser.enterprise,
          "id": dataParser.id,
          "setPoint": setPoint.value,
          "maxLimit": maxLimit.value,
          "minLimit": minLImit.value,
          "name": name.value,
          "histMax": histMax.value,
          "histMin": histMin.value,
    })
  })
  const data = await res.json() 
  if(res.status !== 201){
    console.log('No se actualizo')
  } else{
    console.log('Device ok')
    createDeviceContainer(data)
    userDataParser.body.devices.push(device)
    localStorage.setItem('1', JSON.stringify(userDataParser))
    bringAllDevices()
    //  console.log(userDataParser)
    console.log('localstorage update')
    createSingleDevice(device)
  }
}

    function putValues(){
      setPoint.setAttribute("value", dataParser.setPoint)
      maxLimit.setAttribute("value", dataParser.tempMax)
      minLimit.setAttribute("value", dataParser.tempMin)
      name.setAttribute("value", dataParser.name)
      histMax.setAttribute("value", dataParser.histH)
      histMin.setAttribute("value", dataParser.histL)

    }

    putValues()
  </script>
</body>
</html>